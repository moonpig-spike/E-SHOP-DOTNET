name: CodeQL Advanced Scanning

on:
  workflow_dispatch:
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]


jobs:
  codeql:
      environment: SPIKE_TEST_ENV
      uses: moonpig-spike/SPIKE-WORKFLOW-TEST/.github/workflows/moonpig-codeql.yml@master
    with:
      build-modes: '{"csharp":"manual"}'
      codeql-config: ""
    secrets:
      MNPG_GITHUB_READ_APP_ID: ${{ secrets.MNPG_GITHUB_READ_APP_ID }}
      MNPG_GITHUB_READ_APP_PEM_FILE: ${{ secrets.MNPG_GITHUB_READ_APP_PEM_FILE }}
      MNPG_CODEQL_SLACK_WEBHOOK_URL: ${{ secrets.MNPG_CODEQL_SLACK_WEBHOOK_URL }}
